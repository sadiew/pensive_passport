{% extends 'base.html' %}

{% block body %}

    <div class="row">
        {% for photo in city1.photos %}
            <span class="photos-list-1" data-photo="{{photo}}"></span>
        {% endfor %}
        {% for photo in city2.photos %}
            <span class="photos-list-2" data-photo="{{photo}}"></span>
        {% endfor %}
        <div id="photo-1" class="col-xs-6 flickr-photo"></div>
        <div id="photo-2" class="col-xs-6 flickr-photo"></div>       
    </div>
    <script type="text/javascript">

        $(document).ready(function(){

            setInitialPhotos();
            for (i = 1; i <= 5; i++) {
              LoopPhotos(i);
            }
          
            });

        function setInitialPhotos() {
            $('#photo-1').attr("style","background-image:url('{{city1.photos[0]}}');");
            $('#photo-2').attr("style","background-image:url('{{city2.photos[0]}}');");
        }

        function LoopPhotos(i) {
            var photos2 = $(".photos-list-2");           
            var url2 = $(photos2[i]).data("photo");                
                setTimeout(function() {
                    $('#photo-2').attr("style","background-image:url('" + url2 + "');")
                    }, 3000);          

            var photos1 = $(".photos-list-1");           
            var url1 = $(photos1[i]).data("photo");                
                setTimeout(function() {
                    $('#photo-1').attr("style","background-image:url('" + url1 + "');")
                    }, 3000);
        }          
        
    </script>

    <form action="/results" method="POST">
        <div class="row">
             <div class="col-xs-6">
                <h4>Airports</h4>
                <label>Home</label>
                    <select name="departure-airport" class="form-control airport-dropdown">
                        {% for airport in origin_city.airports %}
                            <option value="{{airport.airport_code}}">{{airport.name}} - {{airport.airport_code}}</option>
                        {% endfor %}
                    </select>
                <label>{{city1.name}}</label>
                    <select name="airport-1" class="form-control airport-dropdown">
                        {% for airport in city1.airports %}
                            <option value="{{airport.airport_code}}">{{airport.name}} - {{airport.airport_code}}</option>
                        {% endfor %}
                    </select>
                <label>{{city2.name}}</label>
                    <select name="airport-2" class="form-control airport-dropdown">
                        {% for airport in city2.airports %}
                            <option value="{{airport.airport_code}}">{{airport.name}} - {{airport.airport_code}}</option>
                        {% endfor %}
                    </select>
            </div>
            <div class="col-xs-6">
                <h4>Travel Dates</h4> 
                    <label>Departure Date</label>                    
                    <input name="depart-date" min="2015-06-01" max="2015-12-31" type="date">
                    <label>Return Date</label>
                    <input name="return-date" min="2015-06-01" max="2015-12-31" type="date">
                <h4>Ideal Temperature</h4>
                <div class="radio">
                    <label><input type="radio" name="ideal-temp" value="50"><img class="weather-radio" src="/static/images/snowflake.png"></label>
                </div>
                <div class="radio">
                    <label><input type="radio" name="ideal-temp" value="70"><img class="weather-radio" src="/static/images/sun_cloud.png"></label>
                </div>
                <div class="radio">
                    <label><input type="radio" name="ideal-temp" value="90"><img class="weather-radio" src="/static/images/sun.png"></label>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <h4>Importance</h4>
                <div class="form-group importance-slider">
                    <label>Cost</label><span id="cost-range"></span>                    
                    <input type="range" min="0" max="5" step="1" name="cost" oninput="showCostVal(this.value)" onchange="showCostVal(this.value)">
                </div>
                <div class="form-group importance-slider">
                    <label>Quality of Food</label><span id="food-range"></span> 
                    <input type="range" min="0" max="5" step="1" name="food" oninput="showFoodVal(this.value)" onchange="showFoodVal(this.value)">
                </div>
                   <div class="form-group importance-slider">
                    <label>Weather</label><span id="weather-range"></span> 
                    <input type="range" min="0" max="5" step="1" name="weather" oninput="showWeatherVal(this.value)" onchange="showWeatherVal(this.value)">
                </div>
            </div>
            <div class="col-xs-6">
                <h4>Wow Factor</h4>
                <div class="form-group wow-slider">
                    <label>{{city1.name}}</label>
                        <input type="range" min="1" max="10" step="1"  name="wow-factor-1">
                </div>
                <div class="form-group wow-slider">
                    <label>{{city2.name}}</label> 
                        <input type="range" min="1" max="10" step="1" name="wow-factor-2">                   
                </div>
                <input type="submit" class="btn btn-primary" value="Tell me where to go!">
            </div>
        </div>
    </form>

    <script type="text/javascript">

    function showCostVal(newVal){
      $("#cost-range").text(": " + newVal + "/5");
    }

    function showFoodVal(newVal){
      $("#food-range").text(": " + newVal + "/5");
    }

    function showWeatherVal(newVal){
      $("#weather-range").text(": " + newVal + "/5");
    }
    </script>

{% endblock %}